###Profile###
profile=high-quality

###General###
keep-open=yes
autofit=50%

###OSD###
osd-bar=no

###Priority###
alang=jpn,eng
slang=eng

###Video###
vo=gpu-next
gpu-api=vulkan
gpu-context=waylandvk
hwdec=auto

###Audio###
audio-file-auto=fuzzy
audio-channels=stereo

###Subs###
demuxer-mkv-subtitle-preroll=yes
blend-subtitles=yes
sub-fix-timing=no
sub-auto=fuzzy
sub-blur=0.1

###Deband###
deband=yes
deband-iterations=4
deband-threshold=25
deband-range=16
deband-grain=0

###Dither###
dither-depth=auto
temporal-dither=yes
dither=fruit

###Anti-ring###
scale-antiring=0.6

###Colorspace###
target-prim=auto
target-trc=auto
vf=format=colorlevels=full:colormatrix=auto
video-output-levels=full

###Interpolation###
video-sync=display-resample
interpolation=yes
tscale=oversample

###Grain###
glsl-shader="~/.config/mpv/shaders/noise_static_luma.hook"

###Profiles###
[4k] # 2160p (3840x2160 UHDTV)
profile-desc=4k
profile-cond=((width ==3840 and height <=2160))
# no deinterlacer required because presume progressive
# apply motion interpolation
deband=no # turn off debanding because presume wide color gamut
glsl-shader="~/.config/mpv/shaders/CfL_Prediction.glsl" # UHD videos are YUV420 so chroma upscaling is needed
# UHD videos are too large, downscale to 1440p
glsl-shader="~/.config/mpv/shaders/SSimDownscaler.glsl"

[1440p] # 1440p (2560x1440 QHD)
profile-desc=1440p
profile-cond=((width ==2560 and height <=1440))
# no deinterlacer required because presume progressive
# apply motion interpolation
# apply debanding
glsl-shader="~/.config/mpv/shaders/CfL_Prediction.glsl" # QHD videos are YUV420 so chroma upscaling is needed
# QHD are already 1440p so no luma upscaling is needed

[full-hd]
profile-desc=full-hd
profile-cond=((width ==1920 and height <=1080) and not p["video-frame-info/interlaced"])
# no deinterlacer required because presume progressive
# apply motion interpolation
# apply debanding
glsl-shader="~/.config/mpv/shaders/CfL_Prediction.glsl"  # HD videos are YUV420 so chroma upscaling is needed
glsl-shader="~/.config/mpv/shaders/ArtCNN_C4F16.glsl" # luma upscaling (doubler)

[full-hd-interlaced]
profile-desc=hd-interlaced
profile-cond=((width ==1920 and height <=1080) and p["video-frame-info/interlaced"])
deinterlace=yes # MPV now uses BWDIF by default
# apply motion interpolation
# apply debanding
glsl-shader="~/.config/mpv/shaders/CfL_Prediction.glsl"  # HD videos are YUV420 so chroma upscaling is needed
glsl-shader="~/.config/mpv/shaders/ArtCNN_C4F16.glsl" # luma upscaling (doubler)

[hd]
profile-desc=full-hd
profile-cond=((width ==1280 and height ==720) and not p["video-frame-info/interlaced"])
# no deinterlacer required because presume progressive
# apply motion interpolation
# apply debanding
glsl-shader="~/.config/mpv/shaders/CfL_Prediction.glsl"  # HD videos are YUV420 so chroma upscaling is needed
glsl-shader="~/.config/mpv/shaders/ArtCNN_C4F16.glsl" # luma upscaling (doubler)

[sdtv-ntsc] # 640x480, 704x480, 720x480 @ 30fps (NTSC DVD - interlaced)
profile-desc=sdtv-ntsc
profile-cond=((width ==640 and height ==480) or (width ==704 and height ==480) or (width ==720 and height ==480))
deinterlace=yes # MPV now uses BWDIF by default
# apply motion interpolation
# apply debanding
glsl-shader="~/.config/mpv/shaders/CfL_Prediction.glsl"  # SD videos are YUV420 so chroma upscaling is needed
glsl-shader="~/.config/mpv/shaders/ArtCNN_C4F16.glsl" # luma upscaling (doubler)

[sdtv-pal] # 352x576, 480x576, 544x576, 720x576 @ 30fps (PAL broadcast or DVD - interlaced)
profile-desc=sdtv-pal
profile-cond=((width ==352 and height ==576) or (width ==480 and height ==576) or (width ==544 and height ==576) or (width ==720 and height ==576))
deinterlace=yes # MPV now uses BWDIF by default
# apply motion interpolation
# apply debanding
glsl-shader="~/.config/mpv/shaders/CfL_Prediction.glsl"  # SD videos are YUV420 so chroma upscaling is needed
glsl-shader="~/.config/mpv/shaders/ArtCNN_C4F16.glsl" # luma upscaling (doubler)
